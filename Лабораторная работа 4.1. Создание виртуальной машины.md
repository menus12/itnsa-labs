# Раздел 4. Сетевые и системные операции

## Лабораторная работа 4.1. Создание виртуальной машины

### Описание сценария

Виртуальные машины являются одним из ключевых вычислительных ресурсов, которые предоставляются публичными облачными провайдерами и позволяют начать переход от использования собственной инфраструктуры к концепции «инфраструктура как сервис».

В данном сценарии системный администратор тестирует возможности создания виртуальных машин средствами портала облачного провайдера.

### Задачи лабораторной работы

- Создать виртуальную машину под управлением операционной системы Windows Server
- Настроить веб-сервер и проверить, что он доступен из публичной сети интернет.

### Создание виртуальной машины на портале Azure

1. Войдите на портал Azure по адресу **portal.azure.com** под вашей учетной записью.

![](/assets/pics/4.1.1.png "Рис. 4.1.1. Вход на портал Azure")

2. При первом входе пройдите обзор основных функций портала Azure (опционально).

![](/assets/pics/4.1.2.png "Рис. 4.1.2. Окно приветствия")

3. Если вы работаете в среде, где для вас уже создана группа ресурсов, пропустите шаги 3-5 и перейдите к шагу 6. В левом меню выберите «Группа ресурсов» и нажмите создать.

![](/assets/pics/4.1.3.png "Рис. 4.1.3. Боковое меню ресурсов")

4. При создании группы ресурсов выберите доступную вам подписку и дайте произвольное имя группе ресурсов (в данном примере используется имя **rg-labuser** ). В качестве региона используйте «**Восточный регион США**». Нажмите «**Просмотр и создание**» и далее «**Создать**».

![](/assets/pics/4.1.4.png "Рис. 4.1.4. Создание группы ресурсов")

5. В панели уведомлений убедитесь, что группа ресурсов создана и перейдите в созданную группу ресурсов.

![](/assets/pics/4.1.5.png "Рис. 4.1.5. Панель уведомлений")

6. В верхней панели нажмите кнопку «**Создать**», в панели слева выберите категорию «**Вычисление**», в разделе «Популярные продукты» выберите «**Виртуальная машина**» и нажмите «**Создать**».

![](/assets/pics/4.1.6.png "Рис. 4.1.6. Панель управления группы ресурсов")

![](/assets/pics/4.1.7.png "Рис. 4.1.7. Окно создания ресурса")

7. Создайте виртуальную машину согласно следующим основным параметрам:

| **Параметр** | **Значение** |
| --- | --- |
| Подписка | Использовать предоставленное по умолчанию |
| Группа ресурсов | Использовать предоставленное по умолчанию |
| Имя виртуальной машины | myVM |
| Регион | (US) Восточный регион США |
| Параметры доступности | Избыточность параметров инфраструктуры не требуется |
| Образ | Windows Server 2019 Datacenter, поколение 2 |
| Размер | Standard D2s v3 |
| Имя пользователя | azureuser |
| Пароль (внимательно следите за правильностью ввода!) | Pa$$w0rd1234 |
| Общедоступные входящие порты | Разрешить выбранные порты |
| Выбрать входящие порты | RDP (3389) и HTTP (80) |

1. На вкладке «**Диски**» выберите тип ОС диска **SSD** **(цен. Категория «Стандартный»)**. На вкладке «**Сетевые подключения**» оставьте примененные параметры по умолчанию. На вкладке «**Управление**» отключите диагностику загрузки. Нажмите «**Просмотр и создание**» (Review + Create) в нижней части страницы. Ознакомьтесь с параметрами и нажмите «**Создать**» (Create). Создание виртуальной машины займет несколько минут, информация об окончании процесса появится в верхней панели уведомлений.

### Подключение к виртуальной машине

1. Откройте созданную виртуальную машины в группе ресурсов или нажав на кнопку «**Перейти к ресурсу**» в панели уведомлений. В верхней панели нажмите на кнопку «**Подключиться**» и выберите опцию «**RDP**».

![](/assets/pics/4.1.8.png "Рис. 4.1.8. Панель управления виртуальной машиной")

2. В открывшемся окне оставьте параметры по умолчанию и нажмите «**Скачать RDP-файл**».

![](/assets/pics/4.1.9.png "Рис. 4.1.9. Опции подключения к виртуальной машине")

3. Откройте скачанный RDP-файл, нажмите «**Подключить**». В окне ввода учетной записи введите учетную запись **azureuser** и пароль **Pa$$w0rd1234**.
4. Во время входа в систему может появиться предупреждение о сертификате. Нажмите кнопку «**Да**», чтобы создать подключение и подключиться к развернутой виртуальной машине. Подключение должно пройти успешно.
5. После успешного входа закройте всплывающие окна диспетчера серверов и панели мониторинга.

### Установка роли веб-сервера и проверка доступности

1. Внутри рабочего стола виртуальной машинызапустите PowerShell, выполнив поиск в строке поиска, а когда этот элемент будет найден, щелкните правой кнопкой мыши на **Windows PowerShell** , чтобы выполнить **Запуск от имени администратора**.

![](/assets/pics/4.1.10.png "Рис. 4.1.10. Рабочий стол созданной виртуальной машины")

2. Установитерольвеб-серверакомандой **Install-WindowsFeature -name Web-Server -IncludeManagementTools**. После завершения выполнения команды появится командная строка с сообщением об успешной установке, для которого указано значение True. Перезапускать виртуальную машину для завершения установки не требуется. Закройте подключение RDP.

```
Windows PowerShell
Copyright (C) Microsoft Corporation. All rights reserved.

PS C:\Users\azureuser> Install-WindowsFeature -name Web-Server -IncludeManagementTools

Success Restart Needed Exit Code      Feature Result
------- -------------- ---------      --------------
True    No             Success        {Common HTTP Features, Default Document, D...


PS C:\Users\azureuser>

```

3. Вернитесь на портал, перейдите обратно в колонку «**Обзор**» (Overview) виртуальной машины **myVM** , найдите в панели с основной информацией «Общедоступный IP-адрес» нажмите на значок «Копировать в буфер обмена».

![](/assets/pics/4.1.11.png "Рис. 4.1.11. Панель информации о виртуальной машине")

4. Откройте новую вкладку в браузере, вставьте этот адрес в текстовое поле URL-адреса и нажмите клавишу Ввод для перехода. Отобразится страница приветствия веб-сервера IIS, который был установлен на созданной виртуальной машине.

![](/assets/pics/4.1.12.png "Рис. 4.1.12. Успешный доступ к настроенному веб-серверу")
