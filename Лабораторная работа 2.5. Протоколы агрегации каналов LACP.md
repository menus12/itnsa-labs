## Лабораторная работа 2.5. Протоколы агрегации каналов LACP

### Описание сценария

Агрегация каналов — технология, которая позволяет объединить несколько физических каналов в один логический. Агрегация каналов может быть настроено между двумя коммутаторами, коммутатором и маршрутизатором, между коммутатором и хостом. В данной работе рассматривается протокол LACP (Link Aggregation Control Protocol).

Согласно сценарию, сетевому администратору было поручено увеличить пропускную способность каналов связи между коммутаторами и обеспечить их отказоустойчивость.

### Задачи лабораторной работы

- Настроить параметры протоколов агрегации LACP

### Описание топологии

Топология состоит из двух клиентских машин IT-1 и IT-2 и двух коммутаторов SW1 и SW2.

![](/assets/pics/2.5.1.png "Коммутация между SW1 и SW2")

![](/assets/pics/2.5.2.png "Рис. 2.5.2. Топология")

### Начальное состояние и базовые настройки устройств

- Интерфейсы между коммутаторами настроены в режиме магистральных портов

### Настройка протокола LACP

1. На коммутаторе SW1 перейдите к конфигурации интерфейсов G0/0, G0/1 и укажите логический интерфейс с номером 12 в режиме active при помощи команды **channel-group 12 mode active**.
2. Убедитесь, что агрегация происходит по протоколу LACP и в ней участвуют интерфейсы G0/0 и G0/1 при помощи команды **show etherchannel summary**.

```
SW1(config)#int range g0/0-1
SW1(config-if-range)#channel-group 12 mode active 
Creating a port-channel interface Port-channel 12

SW1#show etherchannel summary 
…
Group  Port-channel  Protocol    Ports
------+-------------+-----------+-----------------------------------------------
12     Po12(SD)        LACP      Gi0/0(s)    Gi0/1(s)    
```

3. Аналогично на коммутаторе SW2 на интерфейсах G0/0, G0/1 укажите принадлежность к логическому интерфейсу 12 в режиме passive при помощи команды **channel-group 12 mode passive**.

**Примечание**

---

Режим работы active – включение LACP. Режим работы passive – включение LACP, если придет сообщение LACP, т.е. интерфейсы на противоположной стороне логического интерфейса в режиме active. 

---

4. Убедитесь, что логический интерфейс 12 работает по протоколу LACP и ему принадлежат интерфейсы G0/0 и G0/1 в режиме passive при помощи команды **show etherchannel port-channel**.

```
SW2(config)#int range g0/0-1
SW2(config-if-range)#channel-group 12 mode passive 
Creating a port-channel interface Port-channel 12

SW2#show etherchannel port-channel 
…
Port-channel: Po12    (Primary Aggregator)
…
Port state          = Port-channel Ag-Inuse 
Protocol            =   LACP

Ports in the Port-channel: 

Index   Load   Port     EC state        No of bits
------+------+------+------------------+-----------
  0     00     Gi0/0    Passive            0
  0     00     Gi0/1    Passive            0
```