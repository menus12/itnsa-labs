## Лабораторная работа 1.3. Протокол динамической маршрутизации EIGRP

### Описание сценария

Применение протоколов динамической маршрутизации позволяет избежать ручного ввода всех допустимых маршрутов, что обеспечивает согласованность действий всех маршрутизаторов в сети. EIGRP (EnhancedInteriorGatewayRoutingProtocol) – дистанционно-векторный протокол динамической маршрутизации.

Согласно сценарию, небольшая развивающаяся компания имеет несколько подразделений, расположенных удаленно друг от друга. В ближайшем времени компания планирует открыть еще несколько подразделений, поэтому сетевому администратору было поручено обеспечить масштабируемость сети.

### Задачи лабораторной работы

- Настроить базовые параметры протокола маршрутизации EIGRP
- Обеспечить связность между всеми клиентскими машинами

### Описание топологии

Топология состоит из трех клиентских машин PC-A, PC-B, PC-C и трех маршрутизатора R1, R2, и R3.

![](/assets/pics/1.3.1.png "Рис. 1.3.1. Топология")

| Устройство | Интерфейс | IP-адрес | Маска подсети | Шлюз по умолчанию |
| --- | --- | --- | --- | --- |
| R1 | G0/0 | 192.168.1.1 | 255.255.255.0 | - |
| | G0/1 | 10.1.2.1 | 255.255.255.252 | - |
| | G0/2 | 10.1.3.1 | 255.255.255.252 | - |
| R2 | G0/0 | 192.168.2.2 | 255.255.255.0 | - |
| | G0/1 | 10.1.2.2 | 255.255.255.252 | - |
| | G0/2 | 10.2.3.1 | 255.255.255.252 | - |
| R3 | G0/0 | 192.168.3.3 | 255.255.255.0 | - |
| | G0/1 | 10.1.3.2 | 255.255.255.252 | - |
| | G0/2 | 10.2.3.2 | 255.255.255.252 | - |
| PC-A | NIC | 192.168.1.11 | 255.255.255.0 | 192.168.1.1 |
| PC-B | NIC | 192.168.2.11 | 255.255.255.0 | 192.168.2.2 |
| PC-C | NIC | 192.168.3.11 | 255.255.255.0 | 192.168.3.3 |

### Начальное состояние и базовые настройки устройств

- Интерфейсы всех устройств настроены в соответствии с таблицей адресации

### Проверка связности

1. Откройте консоль PC-A (учетная запись cisco\cisco) и выполните проверку доступности PC-B и PC-C с помощью команды **ping.**
2. PC-A не достигло ни одной из других клиентских машин, потому что приватные сети 192.168.2.0/24 и 192.168.3.0/24 отсутствуют в таблице маршрутизации R1. Убедитесь в этом при помощи команды, выполнив команды **show ip route 192.168.2.0** и **show ip route 192.168.3.0** на маршрутизаторе R1.

```PC-A:~$ ping -c 5 192.168.2.11
PING 192.168.2.11 (192.168.2.11): 56 data bytes
--- 192.168.2.11 ping statistics ---
5 packets transmitted, 0 packets received, 100% packet loss

PC-A:~$ ping -c 5 192.168.3.11
PING 192.168.3.11 (192.168.3.11): 56 data bytes
--- 192.168.3.11 ping statistics ---
5 packets transmitted, 0 packets received, 100% packet loss

R1#show ip route 192.168.2.0
% Network not in table

R1#show ip route 192.168.3.0
% Network not in table
```

3. Аналогично убедитесь в отсутствии связности между PC-B и PC-C.

### Настройка динамической маршрутизации

1. Создайте процесс EIGRP с номером автономной системы 100 на маршрутизаторе R1 при помощи команды **router eigrp 100**.
2. Включите EIGRP на интерфейсах на маршрутизаторе R1 при помощи команд **network 192.168.1.0 0.0.0.255** , **network 10.1.2.0 0.0.0.3** и **network 10.1.3.0 0.0.0.3**.

**Примечание**

---

Номер автономной системы должен быть одинаковым на всех маршрутизаторах, которые должны обмениваться информацией по протоколу EIGRP. Параметры команды **network** включают в себя непосредственно присоединенную к маршрутизатору сеть и обратную маску (wildcard), которая, с помощью нулей указывает какая часть из указанной сети должна совпадать, а с помощью единиц — какая часть сети может быть произвольной. Таким образом, для включения в работу протокола EIGRP всех интерфейсов маршрутизатора, которые имеют адрес в сети 192.168.1.0/24 используется обратная маска 0.0.0.255, где последний октет в адресе интерфейса может принимать любое значение. 

---

3. Убедитесь, что на маршрутизаторе R1 работает протокол маршрутизации EIGRP и с его помощью объявлены все напрямую подключенный сети при помощи команды **show ip protocols**.

```R1(config)#router eigrp 100
R1(config-router)#network 192.168.1.0 0.0.0.255   
R1(config-router)#network 10.1.2.0 0.0.0.3
R1(config-router)#network 10.1.3.0 0.0.0.3

R1#show ip protocols 
…
Routing Protocol is "eigrp 100"
…
  Routing for Networks:
    10.1.2.0/30
    10.1.3.0/30
    192.168.1.0
```

4. Аналогично на маршрутизаторах R2 и R3 создайте процесс EIGRP с номером автономной системы 100 и включите EIGRP на интерфейсах.

```R2(config)#router eigrp 100
R2(config-router)#network 192.168.2.0 0.0.0.255
R2(config-router)#network 10.1.2.0 0.0.0.3
R2(config-router)#network 10.2.3.0 0.0.0.3

R3(config)#router eigrp 100
R3(config-router)#network 192.168.3.0 0.0.0.255
R3(config-router)#network 10.1.3.0 0.0.0.3
R3(config-router)#network 10.2.3.0 0.0.0.3
```

5. Убедитесь, что маршрутизатор R3 установил соседство с другими маршрутизаторами при помощи команды **show ip eigrp neighbors**.

```R3#show ip eigrp neighbors 
EIGRP-IPv4 Neighbors for AS(100)
H   Address                 Interface              Hold Uptime   SRTT   RTO  Q  Seq
                                                   (sec)         (ms)       Cnt Num
1   10.2.3.1                Gi0/2                    11 00:02:11 1595  5000  0  8
0   10.1.3.1                Gi0/1                    13 00:02:26   26   156  0  10
```

6. Убедитесь, что в таблице маршрутизации на маршрутизаторе R2 появились маршруты до сетей 10.1.3.0/30, 192.168.1.0/24 и 192.168.3.0/24, полученные по протоколу EIGRP, при помощи команды **show ip route eigrp**.

```R2#show ip route eigrp
Codes: D - EIGRP

      10.0.0.0/8 is variably subnetted, 5 subnets, 2 masks
D        10.1.3.0/30 [90/3072] via 10.2.3.2, 00:11:23, GigabitEthernet0/2
                     [90/3072] via 10.1.2.1, 00:11:23, GigabitEthernet0/1
D     192.168.1.0/24 [90/3072] via 10.1.2.1, 00:11:23, GigabitEthernet0/1
D     192.168.3.0/24 [90/3072] via 10.2.3.2, 00:11:23, GigabitEthernet0/2
```

7. На всех клиентских машинах выполните проверку доступности друг друга при помощи команды **ping**.

```PC-A:~$ ping -c 2 192.168.2.11
PING 192.168.2.11 (192.168.2.11): 56 data bytes
64 bytes from 192.168.2.11: seq=0 ttl=42 time=23.935 ms
64 bytes from 192.168.2.11: seq=1 ttl=42 time=8.662 ms
--- 192.168.2.11 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss

PC-A:~$ ping -c 2 192.168.3.11
PING 192.168.3.11 (192.168.3.11): 56 data bytes
64 bytes from 192.168.3.11: seq=0 ttl=42 time=21.397 ms
64 bytes from 192.168.3.11: seq=1 ttl=42 time=12.733 ms
--- 192.168.3.11 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss

PC-B:~$ ping -c 2 192.168.3.11
PING 192.168.3.11 (192.168.3.11): 56 data bytes
64 bytes from 192.168.3.11: seq=0 ttl=42 time=11.007 ms
64 bytes from 192.168.3.11: seq=1 ttl=42 time=7.187 ms
--- 192.168.3.11 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
```
