## Лабораторная работа 1.2. Настройка статической маршрутизации

### Описание сценария

Маршрутизация – процесс определения пути для передачи сообщения от сети источника к сети назначения. При настройке статической маршрутизации маршруты указываются вручную при конфигурации маршрутизатора.

Согласно сценарию, небольшая бизнес-компания имеет несколько подразделений, расположенных удаленно друг от друга.

### Задачи лабораторной работы

- Настроить параметры статической маршрутизации
- Обеспечить связность между всеми клиентскими машинами

### Описание топологии

Топология состоит из трех клиентских машин PC-A, PC-B, PC-C и трех маршрутизатора R1, R2, и R3.

![](/assets/pics/1.2.1.png "Рис. 1.2.1. Топология")

| Устройство | Интерфейс | IP-адрес | Маска подсети | Шлюз по умолчанию |
| --- | --- | --- | --- | --- |
| R1 | G0/0 | 192.168.1.1 | 255.255.255.0 | - |
| | G0/1 | 10.1.2.1 | 255.255.255.252 | - |
| | G0/2 | 10.1.3.1 | 255.255.255.252 | - |
| R2 | G0/0 | 192.168.2.2 | 255.255.255.0 | - |
| | G0/1 | 10.1.2.2 | 255.255.255.252 | - |
| R3 | G0/0 | 192.168.3.3 | 255.255.255.0 | - |
| | G0/1 | 10.1.3.2 | 255.255.255.252 | - |
| PC-A | NIC | 192.168.1.11 | 255.255.255.0 | 192.168.1.1 |
| PC-B | NIC | 192.168.2.11 | 255.255.255.0 | 192.168.2.2 |
| PC-C | NIC | 192.168.3.11 | 255.255.255.0 | 192.168.3.3 |

### Начальное состояние и базовые настройки устройств

- Интерфейсы всех устройств настроены в соответствии с таблицей адресации

### Проверка связности

1. Откройте консоль PC-A (учетная запись cisco\cisco) и выполните проверку доступности PC-B и PC-C с помощью команды **ping -c 5 192.168.2.11** и **ping -c 5 192.168.3.11** соответственно.
2. PC-A не достигло ни одной из других клиентских машин, потому что приватные сети 192.168.2.0/24 и 192.168.3.0/24 отсутствуют в таблице маршрутизации R1. Убедитесь в этом при помощи команды, выполнив команды **show ip route 192.168.2.0** и **show ip route 192.168.3.0** на маршрутизаторе R1.

```
PC-A:~$ ping -c 5 192.168.2.11
PING 192.168.2.11 (192.168.2.11): 56 data bytes
--- 192.168.2.11 ping statistics ---
5 packets transmitted, 0 packets received, 100% packet loss

PC-A:~$ ping -c 5 192.168.3.11
PING 192.168.3.11 (192.168.3.11): 56 data bytes
--- 192.168.3.11 ping statistics ---
5 packets transmitted, 0 packets received, 100% packet loss

R1#show ip route 192.168.2.0
% Network not in table

R1#show ip route 192.168.3.0
% Network not in table
```

3. Аналогично убедитесь в отсутствии связности между PC-B и PC-C.

### Настройка статической маршрутизации

1. Настройте статический маршрут к сети 192.168.2.0/24 на маршрутизаторе R1, используя IP-адрес интерфейса G0/1 маршрутизатора R2 при помощи команды **ip route 192.168.2.0 255.255.255.0 10.1.2.2**.
2. Аналогично настройте статический маршрут к сети 192.168.3.0/24 на маршрутизаторе R1, используя IP-адрес интерфейса G0/1 маршрутизатора R3.

```
R1(config)#ip route 192.168.2.0 255.255.255.0 10.1.2.2
R1(config)#ip route 192.168.3.0 255.255.255.0 10.1.3.2
```

3. Убедитесь, что на R1 в таблице маршрутизации появились обе подсети.

```
R1(config)#do sh ip route

S     192.168.2.0/24 [1/0] via 10.1.2.2
S     192.168.3.0/24 is directly connected, GigabitEthernet0/2
```

**Примечание**

---

Клиентские машины не могут обратиться друг к другу, поскольку на маршрутизаторах R2 и R3 в таблицах маршрутизации отсутствует путь к приватной сети 192.168.1.0/24.

---


### Настройка маршрутов по умолчанию

1. Настройте маршрут по умолчанию на маршрутизаторах R2 и R3 при помощи команды **ip route  0.0.0.0 0.0.0.0 10.1.2.1** и **ip route  0.0.0.0 0.0.0.0 10.1.3.1** соответственно.
2. Убедитесь, что на R2 и R3 в таблице маршрутизации появился маршрут по умолчанию.

```
R2(config)#ip route 0.0.0.0 0.0.0.0 10.1.2.1
R2(config)#do sh ip route | include Gateway
Gateway of last resort is 10.1.2.1 to network 0.0.0.0


R3(config)#ip route 0.0.0.0 0.0.0.0 10.1.3.1
R3(config)#do sh ip route | include Gateway
Gateway of last resort 10.1.3.1 to network 0.0.0.0
```

3. На всех клиентских машинах выполните проверку доступности друг друга при помощи команды ping.

```
PC-A:~$ ping -c 2 192.168.2.11
PING 192.168.2.11 (192.168.2.11): 56 data bytes
64 bytes from 192.168.2.11: seq=0 ttl=42 time=6.019 ms
64 bytes from 192.168.2.11: seq=1 ttl=42 time=4.904 ms
--- 192.168.2.11 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss

PC-A:~$ ping -c 2 192.168.3.11
PING 192.168.3.11 (192.168.3.11): 56 data bytes
64 bytes from 192.168.3.11: seq=0 ttl=42 time=58.986 ms
64 bytes from 192.168.3.11: seq=1 ttl=42 time=4.898 ms
--- 192.168.3.11 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss

PC-C:~$ ping -c 2 192.168.2.11
PING 192.168.2.11 (192.168.2.11): 56 data bytes
64 bytes from 192.168.2.11: seq=0 ttl=42 time=30.228 ms
64 bytes from 192.168.2.11: seq=1 ttl=42 time=19.732 ms
--- 192.168.2.11 ping statistics ---
2 packets transmitted, 2 packets received, 0% packet loss
```

**Примечание**

---


Статический маршрут по умолчанию — это маршрут, которому соответствуют все пакеты, представляющий любую сеть, отсутствующую в таблице маршрутизации. Маршрут по умолчанию используется, если ни один из маршрутов в таблице маршрутизации не совпадает с IP-адресом места назначения пакета. Статические маршруты по умолчанию обычно используются при подключении: 
- пограничного маршрутизатора к сети интернет-провайдера;  
- тупикового маршрутизатора.  

---


