## Лабораторная работа 4.4. Создание виртуальной машины с помощью шаблона

### Описание сценария

Шаблоны виртуальных машин позволяют быстро разворачивать необходимые конфигурации вычислительных ресурсов на в инфраструктуре публичного облачного провайдера, в том числе, с использованием программных средств взаимодействия с облаком.

В данном сценарии системный администратор тестирует возможность создания виртуальной машины с помощью шаблона быстрого запуска.

### Задачи лабораторной работы

- Изучить галерею шаблонов
- Настроить шаблон и развернуть из него виртуальную машину

### Поиск и редактирование шаблона виртуальной машины

1. Войдите на портал Azure по адресу **portal.azure.com** под вашей учетной записью.
2. Создайте группу ресурсов или используйте группу ресурсов, выделенную для вашей учетной записи.
3. В новой вкладке браузера откройте галерею шаблонов Azure по ссылке: [https://azure.microsoft.com/en-us/resources/templates/?azure-portal=true](https://azure.microsoft.com/en-us/resources/templates/?azure-portal=true). В данной галерее вы можете увидеть ряд популярных шаблонов, которые автоматизируют развертывание ресурсов Azure, включая установку популярных программных пакетов.

![](/assets/pics/4.4.1.png "Рис. 4.4.1. Галереяшаблонов Azure Resource Manager")

4. В строке поиска введите «**Deploy a simple Windows VM**» и выберите шаблон с данным названием. Ознакомьтесь с описанием параметров шаблона и нажмите «**Развертывание в Azure**».
5. В появившемся окне нажмите «Изменить шаблон». В качестве формата шаблона Resource Manager используется формат JSON. Просмотрите параметры и переменные. После этого найдите параметр для имени виртуальной машины. Измените имя на **MyTemplateVM**.

![](/assets/pics/4.4.2.png "Рис. 4.4.2. Галереяшаблонов Azure Resource Manager")

6. Сохраните изменения, после чего вы вернетесь к окну «**Настраиваемое развертывание**». Обратите внимание, что параметр **Vm Name** изменен на то значение, которое вы отредактировали в шаблоне.
7. В верхней панели нажмите «**Визуализировать**», после чего откроется визуализатор ресурсов. В нем вы можете посмотреть на «топологию по умолчанию» при создании виртуальной машины. На визуализации видно, что при создании виртуальной машины по умолчанию создается учетная запись хранения для диагностической информации, сетевой адаптер, который связан с публичным IP-адресом и виртуальной сетью, а для виртуальной сети создается группа сетевой безопасности.

![](/assets/pics/4.4.3.png "Рис. 4.4.3. Визуализатор ресурсов")

8. Закройте визуализатор ресурсов и в сведениях об экземпляре укажите имя пользователя **azureuser** и пароль **Pa$$w0rd1234**. Остальные параметры оставьте по умолчанию и нажмите «**Проверка и создание**», проверьте конфигурацию и нажмите «**Создание**».
9. Дождитесь создания виртуальной машины и проверьте, что все параметры соответствуют тем, которые были указаны в шаблоне.
